<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 650">
  <!-- Background -->
  <rect width="850" height="650" fill="#f8f9fa" />
  
  <!-- Title -->
  <text x="425" y="30" font-family="Arial" font-size="20" text-anchor="middle" font-weight="bold">GPU Register Flow Diagram</text>
  
  <!-- Instruction Timeline -->
  <line x1="160" y1="80" x2="800" y2="80" stroke="#333" stroke-width="2" />
  
  <!-- Instruction Points -->
  <circle cx="200" cy="80" r="6" fill="#4285f4" />
  <circle cx="340" cy="80" r="6" fill="#4285f4" />
  <circle cx="480" cy="80" r="6" fill="#4285f4" />
  <circle cx="620" cy="80" r="6" fill="#4285f4" />
  <circle cx="760" cy="80" r="6" fill="#4285f4" />
  
  <!-- Instruction Labels -->
  <text x="200" y="55" font-family="Arial" font-size="11" text-anchor="middle">MUFU.RCP R6, R3</text>
  <text x="340" y="55" font-family="Arial" font-size="11" text-anchor="middle">FFMA R7, -R3, R6, 1</text>
  <text x="480" y="55" font-family="Arial" font-size="11" text-anchor="middle">FFMA R7, R6, R7, R6</text>
  <text x="620" y="55" font-family="Arial" font-size="11" text-anchor="middle">FFMA R8, R7, R8, R6</text>
  <text x="760" y="55" font-family="Arial" font-size="11" text-anchor="middle">MUFU.RSQ R5, R8</text>
  
  <!-- Legends for each instruction step -->
  <text x="180" y="100" font-family="Arial" font-size="11" text-anchor="middle" font-style="italic">2 registers total</text>
  <text x="320" y="100" font-family="Arial" font-size="11" text-anchor="middle" font-style="italic">3 registers total</text>
  <text x="480" y="100" font-family="Arial" font-size="11" text-anchor="middle" font-style="italic">4 registers total</text>
  <text x="620" y="100" font-family="Arial" font-size="11" text-anchor="middle" font-style="italic">4 registers total</text>
  <text x="760" y="100" font-family="Arial" font-size="11" text-anchor="middle" font-style="italic">2 registers total</text>
  
  <!-- Headers for register indices -->
  <text x="50" y="140" font-family="Arial" font-size="14" font-weight="bold">Instruction</text>
  <text x="50" y="170" font-family="Arial" font-size="14" font-weight="bold">Register 0</text>
  <text x="50" y="220" font-family="Arial" font-size="14" font-weight="bold">Register 1</text>
  <text x="50" y="270" font-family="Arial" font-size="14" font-weight="bold">Register 2</text>
  <text x="50" y="320" font-family="Arial" font-size="14" font-weight="bold">Register 3</text>
  <text x="50" y="370" font-family="Arial" font-size="14" font-weight="bold">Operation</text>
  
  <!-- Horizontal lines for each register -->
  <line x1="160" y1="170" x2="800" y2="170" stroke="#ddd" stroke-width="1" stroke-dasharray="5,5" />
  <line x1="160" y1="220" x2="800" y2="220" stroke="#ddd" stroke-width="1" stroke-dasharray="5,5" />
  <line x1="160" y1="270" x2="800" y2="270" stroke="#ddd" stroke-width="1" stroke-dasharray="5,5" />
  <line x1="160" y1="320" x2="800" y2="320" stroke="#ddd" stroke-width="1" stroke-dasharray="5,5" />
  <line x1="160" y1="370" x2="800" y2="370" stroke="#ddd" stroke-width="1" stroke-dasharray="5,5" />
  
  <!-- Vertical separation lines -->
  <line x1="270" y1="120" x2="270" y2="380" stroke="#ddd" stroke-width="1" />
  <line x1="410" y1="120" x2="410" y2="380" stroke="#ddd" stroke-width="1" />
  <line x1="550" y1="120" x2="550" y2="380" stroke="#ddd" stroke-width="1" />
  <line x1="690" y1="120" x2="690" y2="380" stroke="#ddd" stroke-width="1" />

  <!-- MUFU.RCP R6, R3 -->
  <text x="200" y="140" font-family="Arial" font-size="12" text-anchor="middle">MUFU.RCP R6, R3</text>
  <rect x="175" y="155" width="50" height="30" rx="5" fill="#ea4335" />
  <text x="200" y="175" font-family="Arial" font-size="12" text-anchor="middle" fill="white">INF</text>
  <rect x="175" y="205" width="50" height="30" rx="5" fill="#fbbc05" />
  <text x="200" y="225" font-family="Arial" font-size="12" text-anchor="middle">VAL</text>
  <!-- No Register 2 and Register 3 for this instruction -->
  <text x="200" y="370" font-family="Arial" font-size="12" text-anchor="middle" fill="#4285f4">INF appears</text>

  <!-- FFMA R7, -R3, R6, 1 -->
  <text x="340" y="140" font-family="Arial" font-size="12" text-anchor="middle">FFMA R7, -R3, R6, 1</text>
  <rect x="315" y="155" width="50" height="30" rx="5" fill="#34a853" />
  <text x="340" y="175" font-family="Arial" font-size="12" text-anchor="middle" fill="white">NaN</text>
  <rect x="315" y="205" width="50" height="30" rx="5" fill="#fbbc05" />
  <text x="340" y="225" font-family="Arial" font-size="12" text-anchor="middle">VAL</text>
  <rect x="315" y="255" width="50" height="30" rx="5" fill="#ea4335" />
  <text x="340" y="275" font-family="Arial" font-size="12" text-anchor="middle" fill="white">INF</text>
  <!-- No Register 3 for this instruction -->
  <text x="340" y="370" font-family="Arial" font-size="12" text-anchor="middle" fill="#34a853">NaN appears</text>

  <!-- FFMA R7, R6, R7, R6 Before -->
  <text x="480" y="140" font-family="Arial" font-size="12" text-anchor="middle">FFMA R7, R6, R7, R6 (Before)</text>
  <rect x="455" y="155" width="50" height="30" rx="5" fill="#34a853" />
  <text x="480" y="175" font-family="Arial" font-size="12" text-anchor="middle" fill="white">NaN</text>
  <rect x="455" y="205" width="50" height="30" rx="5" fill="#ea4335" />
  <text x="480" y="225" font-family="Arial" font-size="12" text-anchor="middle" fill="white">INF</text>
  <rect x="455" y="255" width="50" height="30" rx="5" fill="#34a853" />
  <text x="480" y="275" font-family="Arial" font-size="12" text-anchor="middle" fill="white">NaN</text>
  <rect x="455" y="305" width="50" height="30" rx="5" fill="#ea4335" />
  <text x="480" y="325" font-family="Arial" font-size="12" text-anchor="middle" fill="white">INF</text>
  <text x="480" y="370" font-family="Arial" font-size="12" text-anchor="middle">Shared register (before)</text>

  <!-- FFMA R8, R7, R8, R6 Before -->
  <text x="620" y="140" font-family="Arial" font-size="12" text-anchor="middle">FFMA R8, R7, R8, R6 (Before/After)</text>
  <rect x="595" y="155" width="50" height="30" rx="5" fill="#34a853" />
  <text x="620" y="175" font-family="Arial" font-size="12" text-anchor="middle" fill="white">NaN</text>
  <rect x="595" y="205" width="50" height="30" rx="5" fill="#34a853" />
  <text x="620" y="225" font-family="Arial" font-size="12" text-anchor="middle" fill="white">NaN</text>
  <rect x="595" y="255" width="50" height="30" rx="5" fill="#34a853" />
  <text x="620" y="275" font-family="Arial" font-size="12" text-anchor="middle" fill="white">NaN</text>
  <rect x="595" y="305" width="50" height="30" rx="5" fill="#34a853" />
  <text x="620" y="325" font-family="Arial" font-size="12" text-anchor="middle" fill="white">NaN</text>
  <text x="620" y="370" font-family="Arial" font-size="12" text-anchor="middle">Shared register (all NaN)</text>

  <!-- MUFU.RSQ R5, R8 -->
  <text x="760" y="140" font-family="Arial" font-size="12" text-anchor="middle">MUFU.RSQ R5, R8</text>
  <rect x="735" y="155" width="50" height="30" rx="5" fill="#fbbc05" />
  <text x="760" y="175" font-family="Arial" font-size="12" text-anchor="middle">VAL</text>
  <rect x="735" y="205" width="50" height="30" rx="5" fill="#ea4335" />
  <text x="760" y="225" font-family="Arial" font-size="12" text-anchor="middle" fill="white">INF</text>
  <!-- No Register 2 and Register 3 for this instruction -->
  <text x="760" y="370" font-family="Arial" font-size="12" text-anchor="middle" fill="#4285f4">Exceptional values disappeared</text>
  
  <!-- Legend -->
  <rect x="160" y="430" width="20" height="20" rx="3" fill="#fbbc05" />
  <text x="190" y="445" font-family="Arial" font-size="14">VAL - Valid Value</text>
  
  <rect x="160" y="460" width="20" height="20" rx="3" fill="#ea4335" />
  <text x="190" y="475" font-family="Arial" font-size="14">INF - Infinity</text>
  
  <rect x="160" y="490" width="20" height="20" rx="3" fill="#34a853" />
  <text x="190" y="505" font-family="Arial" font-size="14">NaN - Not a Number</text>
  
  <rect x="430" y="430" width="20" height="20" rx="3" fill="none" stroke="#333" />
  <text x="460" y="445" font-family="Arial" font-size="14">Empty Register (Not present)</text>
  
  <!-- Explanation of flow -->
  <text x="160" y="540" font-family="Arial" font-size="14" font-style="italic">Notes:</text>
  <text x="160" y="570" font-family="Arial" font-size="12">1. For the MUFU.RCP instruction, INF appears at the destination (Register 0).</text>
  <text x="160" y="590" font-family="Arial" font-size="12">2. For the FFMA R7, -R3, R6, 1 instruction, NaN appears at the destination (Register 0).</text>
  <text x="160" y="610" font-family="Arial" font-size="12">3. The FFMA R7, R6, R7, R6 instruction uses shared registers (same before and after).</text>
  <text x="160" y="630" font-family="Arial" font-size="12">4. The MUFU.RSQ R5, R8 instruction causes exceptional values to disappear.</text>
</svg>